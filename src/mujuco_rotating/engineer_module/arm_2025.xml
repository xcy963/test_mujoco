<mujoco model="engineer">
  <compiler angle="radian" meshdir="meshes"/>

  <default>
    <!-- ç»™æ‰€æœ‰å…³èŠ‚ä¸€ç‚¹é˜»å°¼å’Œè½¬åŠ¨æƒ¯é‡ï¼Œé˜²æ­¢æŠ– -->
     <!-- åŽŸæ¥å¯ä»¥ç›´æŽ¥ä¿®æ”¹æ ‡ç­¾çš„!!! -->
    <joint damping="2" armature="0.01"/>

    <!-- ç»™æ‰€æœ‰ position actuator ä¸€ä¸ªæ¯”è¾ƒç¨³çš„é»˜è®¤ PD å‚æ•° -->
    <position kp="50" kv="8" forcerange="-100 100"/>
  </default>

  <asset>
    <mesh name="base_link" file="arm/base_link.STL"/>
    <mesh name="Link1" file="arm/Link1.STL"/>
    <mesh name="Link2" file="arm/Link2.STL"/>
    <mesh name="Link3" file="arm/Link3.STL"/>
    <mesh name="Link4" file="arm/Link4.STL"/>
    <mesh name="Link5" file="arm/Link5.STL"/>
    <mesh name="Link6" file="arm/Link6.STL"/>
    <mesh name="Link7" file="arm/Link7.STL"/>
    <mesh name="LinkC" file="arm/LinkC.STL"/>
  </asset>

  <worldbody>
    <!-- mdé¸Ÿå›¾link1å’Œlink2æœ‰å¹²æ¶‰ðŸ–•,æ‰‹åŠ¨å…³æŽ‰ç¢°æ’žæ£€æµ‹ -->
    <!-- <geom size="2.5 2.5 0.005" type="box" rgba="0.7 0.7 0.7 1"/> -->
  <geom name="ground" type="plane"
        size="5 5 0.1"
        pos="0 0 0"
        rgba="0.7 0.7 0.7 1"/>
        <!-- è°ƒè¯•ä¸´æ—¶åŠ ä¸€ä¸ªåœ°é¢ -->
  <!-- å·®é€Ÿåº•ç›˜ï¼šå¸¦ä¸€ä¸ª free å…³èŠ‚ï¼Œè®©æ•´ä¸ªè½¦èƒ½åœ¨åœ°é¢ä¸Šè¿åŠ¨ -->
  <body name="base" pos="0 0 0.1" euler="0 0 3.1415926">
    <inertial pos="0 0 0" mass="20" diaginertia="2 2 2"/>
    <!-- åº•ç›˜æ•´ä½“æƒ¯é‡éšä¾¿å…ˆç»™ä¸ªå€¼ï¼ŒåŽé¢å¯ä»¥å†è°ƒ -->
    <!-- è‡ªç”±æ ¹å…³èŠ‚ï¼Œ6DoFï¼ˆå®žé™…è¿åŠ¨å—è½®å­å’Œåœ°é¢æŽ¥è§¦çº¦æŸï¼‰ -->
    <joint name="base_yaw" type="hinge" axis="0 0 1" damping="2"/>
    <joint name="base_x" type="slide" axis="1 0 0" damping="5"/>
    <joint name="base_y" type="slide" axis="0 1 0" damping="5"/>

    <!-- åŽŸæ¥çš„ base_link meshï¼Œä½œä¸ºè½¦èº« -->
     <!-- è½®å­æ²¡æœ‰ç¢°æ’ž,ä¸ç„¶ä¼šå¥‡æ€ªæ‰“æ»‘ -->
    <geom type="mesh"
          rgba="1 1 1 1"
          mesh="base_link"
          contype="1" conaffinity="1" />

    <!-- å‰å·¦è½® -->
     <body name="wheel_fl" pos="0.20  0.30 0.00" euler="1.5707963267948966 0 0">
      <joint name="wheel_fl_joint" type="hinge"
             axis="0 0 1" damping="0.1"/>
             <!-- è½®å­sizeæ˜¯åŠå¾„åŠ é«˜ -->
      <geom name="wheel_fl_geom"
            type="cylinder"
            size="0.05 0.02"   
            rgba="0 0 0 1"
            friction="1.0 0.1 0.1"
            contype="0" conaffinity="0"/>
    </body>

    <!-- å‰å³è½® -->
    <body name="wheel_fr" pos="0.20 -0.30 -0.00" euler="1.5707963267948966 0 0">
      <joint name="wheel_fr_joint" type="hinge"
             axis="0 0 1" damping="0.1"/>
      <geom name="wheel_fr_geom"
            type="cylinder"
            size="0.05 0.02"
            rgba="0 0 0 1"
            friction="1.0 0.1 0.1"
            contype="0" conaffinity="0"/>
    </body>

    <!-- åŽå·¦è½® -->
    <body name="wheel_rl" pos="-0.20  0.30 0.00" euler="1.5707963267948966 0 0">
      <joint name="wheel_rl_joint" type="hinge"
             axis="0 0 1" damping="0.1"/>
      <geom name="wheel_rl_geom"
            type="cylinder"
            size="0.05 0.02"
            rgba="0 0 0 1"
            friction="1.0 0.1 0.1"
            contype="0" conaffinity="0"/>
    </body>

    <!-- åŽå³è½® -->
    <body name="wheel_rr" pos="-0.20 -0.30 -0.00" euler="1.5707963267948966 0 0">
      <joint name="wheel_rr_joint" type="hinge"
             axis="0 0 1" damping="0.1"/>
      <geom name="wheel_rr_geom"
            type="cylinder"
            size="0.05 0.02"
            rgba="0 0 0 1"
            friction="1.0 0.1 0.1"
            contype="0" conaffinity="0"/>
    </body>

    <!-- è‡‚æ˜¯åŠ åœ¨åº•ç›˜ä¸Šé¢çš„ -->
    <body name="Link1" pos="0.084918 -2.5632e-05 0.2789" euler="0 0 0">
      <!-- åº”ç”¨åœ¨Link1ä¸Šé¢çš„æ—‹è½¬å¯ä»¥è®©è½¦æ­£å¯¹ç€å…‘æ¢ç«™ -->
      <inertial pos="-0.000350438 0.00374111 -0.0436376" quat="0.858541 0.512718 0.00472416 0.00246452" mass="1.83858" diaginertia="0.0114816 0.00828728 0.00647115"/>
      <joint name="Joint1" pos="0 0 0" axis="0 0 -1" range="-1.57 1.57" actuatorfrcrange="-1000 1000" damping="0.8" frictionloss="0.05"/>
      <geom type="mesh" rgba="0.89804 0.91765 0.92941 1" mesh="Link1" contype="0" conaffinity="0"/>
      <body name="Link2" quat="-0.241847 0.241841 0.664465 0.664461">
        <inertial pos="0.123982 0.000129341 0.00582928" quat="-0.00911551 0.709162 -0.000927831 0.704986" mass="1.16588" diaginertia="0.0143257 0.0130042 0.00234215"/>
        <joint name="Joint2" pos="0 0 0" axis="0 0 1" range="0 1.83" actuatorfrcrange="-1000 1000" damping="0.5" frictionloss="0.05"/>
        <geom type="mesh" rgba="0.89804 0.91765 0.92941 1" mesh="Link2"/>
        <body name="Link3" pos="0.275 0 -0.000496" quat="-3.32906e-06 -0.906309 -0.422616 -1.55236e-06">
          
          <inertial pos="0.00861554 -0.16565 -1.40018e-05" quat="0.707107 0.707107 0.000461708 0.000461708" mass="0.604118" diaginertia="0.00446101 0.004014 0.00139799"/>
          <joint name="Joint3" pos="0 0 0" axis="0 0 1" range="0 2.35" actuatorfrcrange="-1000 1000" damping="0.3" frictionloss="0.05"/>
          <geom type="mesh" rgba="1 1 1 1" mesh="Link3"/>

          <body name="LinkC"
            pos="0.13816  0.0384621 0.0123112"
            euler="1.57079534  0.26179367 1.57080013">
            <geom type="mesh" mesh="LinkC" rgba="1 1 1 1" />
            <!-- euler="1.83259 -1.5708 0"> -->
             <!-- è¿™ä¸ªå®šä¹‰æ˜¯xyzæ¬§æ‹‰è§’ï¼Œä½†æ˜¯urdfæ˜¯xyzå›ºå®šè§’ -->

            <!-- çœŸæ­£è¦ç”¨çš„æœºè½½ç›¸æœº,æ—‹è½¬æ˜¯ä¸ºäº†è°ƒæ•´ç›¸æœºçš„åæ ‡ç³»ä¸ºæˆ‘ä»¬å¸¸ç”¨çš„é‚£ä¸ªå®šä¹‰ -->
            <camera name="arm_cam"
              pos="0 0 0"
              euler="0 3.14159 3.14159"
              resolution="1920 1080"

              focalpixel="640.9734 641.0952"
              principalpixel="-317.9608 -133.6433"
              sensorsize="1 1" />
            <!-- https://docs.mujoco.cn/en/stable/XMLreference.html#body-camera-principal -->
             <!-- è¿™ä¸ªprincipalpixelæ˜¯ç›¸å¯¹äºŽä¸­å¤®çš„åç§»cx` = cx-1920/2=k(0,2) - 960 cy -->
              <!-- focalpixel fx fy -->
          </body>


          <body name="Link4" pos="0 -0.335 0" quat="0.707105 -0.707108 0 0">
            <inertial pos="0.0190623 0.017534 0.00646894" quat="0.595915 0.515576 0.560477 0.254818" mass="0.619826" diaginertia="0.00124887 0.00115362 0.000496036"/>
            <joint name="Joint4" pos="0 0 0" axis="0 0 1" range="-2.26 2.26" actuatorfrcrange="-1000 1000" damping="0.1" frictionloss="0.01"/>
            <geom type="mesh" rgba="1 1 1 1" mesh="Link4"/>
            <geom quat="0.5 0.500002 0.499998 -0.5" type="mesh" rgba="1 1 1 1" mesh="Link5"/>
            <body name="Link6" pos="5.50981e-07 -4.04771e-12 -0.15" quat="0.707107 0.707107 -3.89602e-06 1.29867e-06">
              <inertial pos="-1.31215e-11 0 0.00777093" quat="1 0 1.8241e-06 0" mass="0.073638" diaginertia="0.000159 0.000159 1.2e-05"/>
              <joint name="Joint6" pos="0 0 0" axis="0 0 1" range="-1.48 1.48" actuatorfrcrange="-1000 1000" damping="0.2" frictionloss="0.05"/>
              <geom type="mesh" rgba="1 1 1 1" mesh="Link6"/>
              <body name="Link7" pos="0 -0.050353 0" quat="0.707105 0.707108 0 0">
                <inertial pos="-6.83852e-12 0 0.00404997" quat="0.241387 0.650098 -0.320167 0.645444" mass="0.208842" diaginertia="0.00106923 0.00105144 0.00104863"/>
                <joint name="Joint7" pos="0 0 0" axis="0 0 1" range="-3.14 3.14" actuatorfrcrange="-1000 1000" damping="0.1" frictionloss="0.05"/>
                <geom type="mesh" rgba="0.29412 0.29412 0.29412 1" mesh="Link7"/>
                <geom size="0.1 0.1 0.1" pos="0 0 0.1" type="box" rgba="0 0 1 1"/>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </body>

  </worldbody>

  <actuator>
    <velocity name="base_x_vel" joint="base_x" kv="50" ctrllimited="true" ctrlrange="-2 2"/>
    <velocity name="base_y_vel" joint="base_y" kv="50" ctrllimited="true" ctrlrange="-2 2"/>
    <velocity name="base_yaw_vel" joint="base_yaw" kv="20" ctrllimited="true" ctrlrange="-6 6"/>
  
    <position name="Joint1_pos" joint="Joint1"  kp="200" forcerange="-200 200" ctrlrange="-1.57 1.57" />
    <position name="Joint2_pos" joint="Joint2" ctrlrange="0 1.83" />
    <position name="Joint3_pos" joint="Joint3" ctrlrange="0 2.35" />
    <position name="Joint4_pos" joint="Joint4" ctrlrange="-2.26 2.26" />
    <position name="Joint6_pos" joint="Joint6" ctrlrange="-1.48 1.48" />
    <position name="Joint7_pos" joint="Joint7" ctrlrange="-3.14 3.14" />
  </actuator>

</mujoco>
