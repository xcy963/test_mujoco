add_subdirectory(serial_base)
add_compile_options(
    -Wall      #å¯ç”¨å¸¸è§è­¦å‘Š
    -Wextra    #å¯ç”¨é¢å¤–è­¦å‘Š
    -Wpedantic #ä¸¥æ ¼éµå¾ªè¯­è¨€æ ‡å‡†
    # -O1        # 
    -march=native  # æ ¹æ®æœ¬åœ° CPU æ¶æ„ä¼˜åŒ–
)
# include_directories(include)
# include_directories(serial_base/include) #æ¯”è¾ƒä¸‘é™‹
set(engineer_srcs
    engineer_serial.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/include/serial_device/serial_device.cpp  # ç¡®ä¿åŒ…å«å®ç°æ–‡ä»¶
)
add_library(engineer_serial engineer_serial.cpp ${engineer_srcs})
# set(Python3_ROOT_DIR "/usr")
# find_package(Python3 COMPONENTS Development NumPy)
# message(STATUS "Python3_LIBRARIES: ${Python3_LIBRARIES}")
# message(STATUS "Python3_INCLUDE_DIRS: ${Python3_INCLUDE_DIRS}")

target_include_directories(engineer_serial PUBLIC
    $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>  
    # ${Python3_INCLUDE_DIRS} ${Python3_NumPy_INCLUDE_DIRS}
    # $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/serial_base/include>  #ç›´æ¥åœ¨å¯¹åº”çš„cmakeæ–‡ä»¶include
)#Generator expressions ğŸ˜‹

target_link_libraries(engineer_serial PUBLIC
  serial_base
#   ${PYTHON_LIBRARIES}

  )

# get_target_property(ENGINEER_INCLUDES engineer_serial INCLUDE_DIRECTORIES)
# message("engineer_serial include directories: ")
# message(WARNING "==========================================")
# message(WARNING "æŸ¥çœ‹cmakeçš„ç›®å½•: ${ENGINEER_INCLUDES}")
# message(WARNING "==========================================")


install(TARGETS engineer_serial DESTINATION lib)